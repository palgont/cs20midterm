<!DOCTYPE html>
<html>
    <head>
        <!-- URL: http://localhost:5500/midterm/index.html -->
        <title>Buy Housing</title>
        <!-- Link to external style sheet -->
        <link rel="stylesheet" href="styles.css">
        <!-- For JQuery usage -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" 
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" 
        crossorigin="anonymous"></script>
        <!--Font Style-->
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
        rel="stylesheet">
        <!-- For responsiveness -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Internal CSS -->
        <style>
            body {
                font-family: arial;
            }

            .page_name {
                font-size: 40px; 
                text-align: center;
            }

            .container {
                display: flex;
                flex: 1;
            }

            .sidebar {
                width: 250px;
                background-color: #e5e5e5;
                padding-top: 20px;
                display: flex;
                flex-direction: column;
                margin: 20px;
                border-radius: 20px;
                box-shadow: 0px 5px 12px #888888;
            }

            .input {
                margin: 10px;
                padding: 10px;
                border: 1px;
                border-radius: 5px;
            }

            .filter_button {
                margin: 10px;
                padding: 6px;
            }

            .sidebar_title {
                color: black;
                margin-left: 10px;
                font-family: arial;
                text-align: center;
            }
            
            .content {
                flex: 1;
                padding: 20px;
            }

            .house_card {
                display: flex;
                gap: 15px;
                background-color: #eeeeee;
                padding: 10px;
                border: 1px;
                border-radius: 20px;
                margin-bottom: 10px;
                box-shadow: 0px 3px 5px #888888;
            }
        </style>
        <!-- JavaScript -->
        <script>
            fetch('./house_data.json')
                .then (response => response.json())
                .then (data => filter_houses(data.houses))
                .catch (error => console.log(error))

            function filter_houses(houses) {
                houseList = []
                houses.forEach(house => {
                    if (`${house.sellOrRent}` == "sell") {
                        houseList.push(house)
                    }
                });
                displayHouses(houseList)
            }
            
            function displayHouses(houses) {
                const houseListings = document.getElementById('house-listings');
                houseListings.innerHTML = ""; // Clear existing content

                houses.forEach(house => {
                    if (`${house.sellOrRent}` == "sell") {
                        const houseCard = document.createElement('div');
                        houseCard.classList.add('house-card');

                        houseCard.innerHTML = `
                            <div class="house_card">
                                <img src="${house.image}" alt="House Image" width="200">
                                <div>
                                    <p><strong>Price:</strong> $${house.price}</p>
                                    <p><strong>Address:</strong> ${house.address.street}, ${house.address.city}, ${house.address.state}</p>
                                    <p><strong>Rooms:</strong> ${house.bedrooms} bedroom, ${house.bathrooms} bathroom, ${house.squareFeet} squareFeet</p>
                                    <p><strong>Amenities:</strong> ${house.amenities} </p>
                                </div>
                            </div>
                        `;

                        houseListings.appendChild(houseCard);
                    }
                });
            }
        </script>
    </head>
    <body>
        <!-- Header -->
        <header>
            <a href="index.html">
                <div id = "img_container">
                    <img id="logo" src="./images/house_logo.png">
                </div>
            </a>
            <span id="title">PropertyPath</span>
        </header>
        <!-- Navagation Bar -->
        <nav>
            <a href="index.html">Home </a>
            <a href="buy.html">Buy </a>
            <a href="rent.html">Rent</a>
            <a href="sell.html">Sell</a>
            <a href="agents.html">Agents</a>
            <a href="qanda.html">Q/A</a>
            <a href="contact.html">Contact Us</a>
        </nav>
        <div id = "below_nav"></div>
        <div class="container">
        <!-- Sidebar -->
            <div class="sidebar">
                <h2 class="sidebar_title">Search</h2>
                <input type="text" placeholder="Price range" class="input">
                <input type="text" placeholder="# Bedrooms" class="input">
                <input type="text" placeholder="# Stories" class="input">
                <input type="text" placeholder="State" class="input">
                <button class="filter_button">Search</button>
            </div>
        <!-- Page Content -->
            <div class="content">
                <h1 class="page_name">Houses for Sale</h1>
                <div id="house-listings"></div>
            </div>
        </div>
        <!-- Footer -->
        <footer>
            <p>PropertyPath &nbsp;|&nbsp;+1(###)-###-#### &nbsp;| 
                &nbsp; <a href="mailto:propertypath@gmail.com">propertypath@gmail.com</a></p>
        </footer>
    </body>
</html>

